(function(){"use strict";var e={1021:function(e,n,t){var r=t(9242),s=t(3396);const o=(0,s.Uk)("> ");function i(e,n,t,r,i,a){const u=(0,s.up)("Nav"),c=(0,s.up)("Chat");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(u),(0,s.Wm)(c),o],64)}var a=t(7139);const u={class:"container-sm mt-20"},c={class:"mx-5"},l={ref:"bottom",class:"mt-20"},d={class:"bottom"},g={class:"container-sm"},p=(0,s.Uk)("> "),f={type:"submit"},v=(0,s.Uk)("> ");function m(e,n,t,o,i,m){const h=(0,s.up)("Message"),w=(0,s.up)("SendIcon");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",u,[(0,s._)("div",c,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.messages,(({id:e,text:n,userPhotoURL:t,userName:r,userId:i})=>((0,s.wg)(),(0,s.j4)(h,{key:e,name:r,"photo-url":t,sender:i===o.user?.uid},{default:(0,s.w5)((()=>[(0,s.Uk)((0,a.zw)(n),1)])),_:2},1032,["name","photo-url","sender"])))),128))])]),(0,s._)("div",l,null,512),(0,s._)("div",d,[(0,s._)("div",g,[o.isLogin?((0,s.wg)(),(0,s.iD)("form",{key:0,onSubmit:n[1]||(n[1]=(0,r.iM)(((...e)=>o.send&&o.send(...e)),["prevent"]))},[(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":n[0]||(n[0]=e=>o.message=e),placeholder:"Message",required:""},null,512),[[r.nr,o.message]]),p,(0,s._)("button",f,[(0,s.Wm)(w),v])],32)):(0,s.kq)("",!0)])])],64)}var h=t(4870),w=t(6780);t(2412),t(4406);w.Z.initializeApp({apiKey:"AIzaSyDK2VeAUTLITlv1U_wCn0eZCgWmuOStRWc",authDomain:"dautari-chat-app.firebaseapp.com",projectId:"dautari-chat-app",storageBucket:"dautari-chat-app.appspot.com",messagingSenderId:"42392796638",appId:"1:42392796638:web:96c4f8b352ef7f4895314f",measurementId:"G-LYV9300H7P"});const b=w.Z.auth();function y(){const e=(0,h.iH)(null),n=b.onAuthStateChanged((n=>e.value=n));(0,s.Ah)(n);const t=(0,s.Fl)((()=>null!==e.value)),r=async()=>{const e=new w.Z.auth.GoogleAuthProvider;await b.signInWithPopup(e)},o=()=>b.signOut();return{user:e,isLogin:t,signIn:r,signOut:o}}const _=w.Z.firestore(),O=_.collection("messages"),k=O.orderBy("createdAt","desc").limit(77);function I(){const e=(0,h.iH)([]),n=k.onSnapshot((n=>{e.value=n.docs.map((e=>({id:e.id,...e.data()}))).reverse()}));(0,s.Ah)(n);const{user:t,isLogin:r}=y(),o=e=>{if(!r.value)return;const{photoURL:n,uid:s,displayName:o}=t.value;O.add({userName:o,userId:s,userPhotoURL:n,text:e,createdAt:w.Z.firestore.FieldValue.serverTimestamp()})};return{messages:e,sendMessage:o}}const L={class:"icon-send hover:text-green-500 hover:text-green-500","aria-hidden":"true",focusable:"false",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},S=(0,s._)("path",{fill:"currentColor",d:"M476 3.2L12.5 270.6c-18.1 10.4-15.8 35.6 2.2 43.2L121 358.4l287.3-253.2c5.5-4.9 13.3 2.6 8.6 8.3L176 407v80.5c0 23.6 28.5 32.9 42.5 15.8L282 426l124.6 52.2c14.2 6 30.4-2.9 33-18.2l72-432C515 7.8 493.3-6.8 476 3.2z"},null,-1),x=[S];function A(e,n){return(0,s.wg)(),(0,s.iD)("svg",L,x)}var C=t(89);const D={},U=(0,C.Z)(D,[["render",A]]);var Z=U;const j={class:"message"},M={key:0};function P(e,n,t,r,o,i){const u=(0,s.up)("Avatar");return(0,s.wg)(),(0,s.iD)("div",j,[t.sender?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("span",M,(0,a.zw)(t.name),1)),(0,s._)("div",{class:(0,a.C_)(["flex",t.sender?"flex-row-reverse":""])},[(0,s.Wm)(u,{class:"mt-1",src:t.photoUrl},null,8,["src"]),(0,s._)("div",{class:(0,a.C_)(["text w-3/4",t.sender?"bg-green-800":"bg-gray-700"])},[(0,s.WI)(e.$slots,"default")],2)],2)])}const W=["src"];function H(e,n,t,r,o,i){return(0,s.wg)(),(0,s.iD)("img",{class:"avatar",src:t.src},null,8,W)}var T={props:{src:{type:String,default:""}}};const Y=(0,C.Z)(T,[["render",H]]);var z=Y,N={components:{Avatar:z},props:{name:{type:String,default:""},photoUrl:{type:String,default:""},sender:{type:Boolean,default:!1}}};const R=(0,C.Z)(N,[["render",P]]);var V=R,B={components:{Message:V,SendIcon:Z},setup(){const{user:e,isLogin:n}=y(),{messages:t,sendMessage:r}=I(),o=(0,h.iH)(null);(0,s.YP)(t,(()=>{(0,s.Y3)((()=>{o.value?.scrollIntoView({behavior:"smooth"})}))}),{deep:!0});const i=(0,h.iH)(""),a=()=>{r(i.value),i.value=""};return{user:e,isLogin:n,messages:t,message:i,send:a}}};const q=(0,C.Z)(B,[["render",m]]);var F=q;const K=(0,s._)("h1",null,[(0,s._)("strong",null," Dautari "),(0,s.Uk)(" Chat App")],-1),G={key:0,class:"login"},E={key:1};function $(e,n,t,r,o,i){const a=(0,s.up)("Avatar");return(0,s.wg)(),(0,s.iD)("nav",null,[(0,s._)("div",null,[K,r.isLogin?((0,s.wg)(),(0,s.iD)("div",G,[(0,s.Wm)(a,{src:r.user.photoURL},null,8,["src"]),(0,s._)("button",{class:"text-gray-400 hover:text-white",onClick:n[0]||(n[0]=(...e)=>r.signOut&&r.signOut(...e))}," Sign Out ")])):((0,s.wg)(),(0,s.iD)("div",E,[(0,s._)("button",{class:"bg-green-500 hover:bg-green-600",onClick:n[1]||(n[1]=(...e)=>r.signIn&&r.signIn(...e))},"Sign In")]))])])}var J={components:{Avatar:z},setup(){const{user:e,isLogin:n,signOut:t,signIn:r}=y();return{user:e,isLogin:n,signOut:t,signIn:r}}};const Q=(0,C.Z)(J,[["render",$]]);var X=Q,ee={name:"App",components:{Nav:X,Chat:F}};const ne=(0,C.Z)(ee,[["render",i]]);var te=ne;(0,r.ri)(te).mount("#app")}},n={};function t(r){var s=n[r];if(void 0!==s)return s.exports;var o=n[r]={exports:{}};return e[r](o,o.exports,t),o.exports}t.m=e,function(){var e=[];t.O=function(n,r,s,o){if(!r){var i=1/0;for(l=0;l<e.length;l++){r=e[l][0],s=e[l][1],o=e[l][2];for(var a=!0,u=0;u<r.length;u++)(!1&o||i>=o)&&Object.keys(t.O).every((function(e){return t.O[e](r[u])}))?r.splice(u--,1):(a=!1,o<i&&(i=o));if(a){e.splice(l--,1);var c=s();void 0!==c&&(n=c)}}return n}o=o||0;for(var l=e.length;l>0&&e[l-1][2]>o;l--)e[l]=e[l-1];e[l]=[r,s,o]}}(),function(){t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,{a:n}),n}}(),function(){t.d=function(e,n){for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};t.O.j=function(n){return 0===e[n]};var n=function(n,r){var s,o,i=r[0],a=r[1],u=r[2],c=0;if(i.some((function(n){return 0!==e[n]}))){for(s in a)t.o(a,s)&&(t.m[s]=a[s]);if(u)var l=u(t)}for(n&&n(r);c<i.length;c++)o=i[c],t.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return t.O(l)},r=self["webpackChunkdautari"]=self["webpackChunkdautari"]||[];r.forEach(n.bind(null,0)),r.push=n.bind(null,r.push.bind(r))}();var r=t.O(void 0,[998],(function(){return t(1021)}));r=t.O(r)})();
//# sourceMappingURL=app.10cc3571.js.map